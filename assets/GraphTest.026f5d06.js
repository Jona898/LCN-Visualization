import{r as y,b as m,d as b,e as R,f as I,g as D,w as A,o,c as d,a as l,t as w,h as F,v as k,F as P,i as x,u as p,j as C,p as X,k as N,_ as W,l as U}from"./index.e8023ce0.js";import{E as H}from"./elk.bundled.d59b6e15.js";const M="https://rtsys.informatik.uni-kiel.de//elklive/elk-models/realworld/ptolemy/flattened/ci_router_Router.json",V="G1",Y=[{id:"N1",labels:[{text:"DataReceived",id:"L1",width:80,height:15}],ports:[{id:"P1",properties:{"port.side":"EAST","port.index":"0"},width:8,height:8},{id:"P2",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P3",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N2",labels:[{text:"MonitorValue - q1 length",id:"L2",width:141,height:15}],ports:[{id:"P4",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:60,height:40},{id:"N3",labels:[{text:"MonitorValue - q2 length",id:"L3",width:141,height:15}],ports:[{id:"P5",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:60,height:40},{id:"N4",labels:[{text:"dropped",id:"L4",width:47,height:15}],ports:[{id:"P6",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:41,height:31},{id:"N5",labels:[{text:"Distributor",id:"L5",width:60,height:15}],ports:[{id:"P7",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P8",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P9",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8},{id:"P10",properties:{"port.side":"EAST","port.index":"3"},width:8,height:8},{id:"P11",properties:{"port.side":"EAST","port.index":"4"},width:8,height:8},{id:"P12",properties:{"port.side":"EAST","port.index":"5"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N6",labels:[{text:"Queue1",id:"L6",width:46,height:15}],ports:[{id:"P13",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P14",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P15",properties:{"port.side":"NORTH","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N7",labels:[{text:"Queue2",id:"L7",width:46,height:15}],ports:[{id:"P16",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P17",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P18",properties:{"port.side":"EAST","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N8",labels:[{text:"Counter",id:"L8",width:46,height:15}],ports:[{id:"P19",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P20",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P21",properties:{"port.side":"EAST","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N9",labels:[{text:"RecordAssembler",id:"L9",width:104,height:15}],ports:[{id:"P22",properties:{"port.side":"EAST","port.index":"0"},width:8,height:8},{id:"P23",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P24",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:40,height:41},{id:"N10",labels:[{text:"Display",id:"L10",width:43,height:15}],ports:[{id:"P25",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:41,height:31},{id:"N11",labels:[{text:"Counter",id:"L11",width:46,height:15}],ports:[{id:"P26",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P27",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P28",properties:{"port.side":"EAST","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N12",labels:[{text:"RecordAssembler",id:"L12",width:104,height:15}],ports:[{id:"P29",properties:{"port.side":"EAST","port.index":"0"},width:8,height:8},{id:"P30",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P31",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:40,height:41},{id:"N13",labels:[{text:"Display",id:"L13",width:43,height:15}],ports:[{id:"P32",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:41,height:31},{id:"N14",labels:[{text:"Sleep",id:"L14",width:34,height:15}],ports:[{id:"P33",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P34",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P35",properties:{"port.side":"SOUTH","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N15",labels:[{text:"Sleep",id:"L15",width:34,height:15}],ports:[{id:"P36",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P37",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P38",properties:{"port.side":"SOUTH","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41}],$={portConstraints:"FREE"},B=[{id:"E1",sources:["P1"],targets:["P8"],path:""},{id:"E2",sources:["P11"],targets:["P6"],path:""},{id:"E3",sources:["P12"],targets:["P16"],path:""},{id:"E4",sources:["P10"],targets:["P13"],path:""},{id:"E5",sources:["P15"],targets:["P4"],path:""},{id:"E6",sources:["P15"],targets:["P7"],path:""},{id:"E7",sources:["P14"],targets:["P33"],path:""},{id:"E8",sources:["P18"],targets:["P5"],path:""},{id:"E9",sources:["P18"],targets:["P9"],path:""},{id:"E10",sources:["P17"],targets:["P36"],path:""},{id:"E11",sources:["P21"],targets:["P24"],path:""},{id:"E12",sources:["P22"],targets:["P25"],path:""},{id:"E13",sources:["P28"],targets:["P31"],path:""},{id:"E14",sources:["P29"],targets:["P32"],path:""},{id:"E15",sources:["P34"],targets:["P19"],path:""},{id:"E16",sources:["P34"],targets:["P23"],path:""},{id:"E17",sources:["P37"],targets:["P26"],path:""},{id:"E18",sources:["P37"],targets:["P30"],path:""}],j={URL_SOURCE:M,id:V,children:Y,properties:$,edges:B};function z(n){const i=y({scale:1,minX:0,minY:0}),g=m(100),_=m(100);b(()=>{window.addEventListener("resize",T),n.value&&(g.value=n.value.clientWidth,_.value=n.value.clientHeight)}),R(()=>{window.removeEventListener("resize",T)});const T=()=>{n.value&&(g.value=n.value.clientWidth,_.value=n.value.clientHeight)},h=e=>{const{offsetX:r,offsetY:t,deltaY:s}=e,u=i.scale;i.scale*=1+s*.002,i.scale<.1?i.scale=.1:i.scale>12&&(i.scale=12),i.minX=i.minX-r*i.scale+r*u,i.minY=i.minY-t*i.scale+t*u},c=y({x:0,y:0}),E=e=>{c.x=e.offsetX,c.y=e.offsetY},L=e=>{e.buttons==1&&(i.minX+=(c.x-e.offsetX)*i.scale,i.minY+=(c.y-e.offsetY)*i.scale,c.x=e.offsetX,c.y=e.offsetY)},f=(e,r)=>{const t=e?e/g.value:1,s=r?r/_.value:1;i.scale=Math.max(t,s),i.minX=0,i.minY=0},a=I(()=>[i.minX,i.minY,g.value*i.scale,_.value*i.scale].join(" "));return{viewbox:i,wheelEvent:h,mouseDownEvent:E,mouseMoveEvent:L,resetZoom:f,viewBox_str:a}}const G=n=>(X("data-v-a5843fc2"),n=n(),N(),n),Z={class:"tooltip"},q={class:"tooltiptext"},Q=["value"],J=["viewBox"],K=G(()=>l("defs",null,[l("marker",{id:"head",orient:"auto",markerWidth:"2",markerHeight:"4",refX:"1.55",refY:"2"},[l("path",{d:"M0,0 V4 L2,2 Z",fill:"black"})])],-1)),tt=["x","y","width","height"],et=["original-title","transform"],it=["width","height"],st=["aria-label","x","y","width","height"],rt=["x","y"],ot=["x","y"],dt=["d"],ht=["cx","cy"],pt=D({__name:"elkjsTest",setup(n){const S=m(null),{viewBox_str:v,wheelEvent:O,mouseDownEvent:i,mouseMoveEvent:g,resetZoom:_}=z(S),T=new H({});let h=y(j);const c=m([]);T.knownLayoutAlgorithms().then(a=>c.value=a);const E=m("layered"),L=()=>{var a;(a=h.edges)==null||a.forEach(e=>{var r;(r=e.sections)==null||r.forEach(t=>{t.bendPoints=[]})}),T.layout(h,{layoutOptions:{"elk.algorithm":E.value}}).then(e=>{_(h.width,h.height),h.edges=e.edges.map(r=>({...r,path:f(r)}))}).catch(e=>console.warn({e}))};A(E,()=>{L()},{immediate:!1,deep:!0});const f=a=>(a==null?void 0:a.sections)==null?"":a.sections.reduce((e,r)=>{var t;return e+`M${r.startPoint.x},${r.startPoint.y}${r.bendPoints!=null?(t=r.bendPoints)==null?void 0:t.reduce((s,u)=>s+`L${u.x},${u.y}`,""):""}L${r.endPoint.x},${r.endPoint.y}`},"");return L(),(a,e)=>{var r;return o(),d("div",null,[l("div",Z,[l("span",q,w((r=c.value.find(t=>{var s;return(s=t.id)==null?void 0:s.includes(E.value)}))==null?void 0:r.description),1),F(l("select",{name:"layoutAlgoryth",id:"layoutAlgoryth","onUpdate:modelValue":e[0]||(e[0]=t=>E.value=t)},[(o(!0),d(P,null,x(c.value,t=>{var s,u;return o(),d("option",{key:t.id,value:(s=t.id)==null?void 0:s.slice(16)},w(t.name)+": "+w((u=t.description)==null?void 0:u.slice(void 0,80))+"... ",9,Q)}),128))],512),[[k,E.value,void 0,{lazy:!0}]]),l("p",null,w(E.value),1)]),(o(),d("svg",{ref_key:"svgRef",ref:S,xmlns:"http://www.w3.org/2000/svg",viewBox:p(v),style:{"background-color":"green"},onWheel:e[1]||(e[1]=C((...t)=>p(O)&&p(O)(...t),["prevent"])),onMousedown:e[2]||(e[2]=(...t)=>p(i)&&p(i)(...t)),onMousemove:e[3]||(e[3]=(...t)=>p(g)&&p(g)(...t))},[K,l("rect",{x:p(h).x,y:p(h).y,width:p(h).width,height:p(h).height,fill:"none",stroke:"#204060","stroke-width":"2"},null,8,tt),(o(!0),d(P,null,x(p(h).children,t=>(o(),d("g",{key:t.id,class:"node","original-title":t.id,transform:`translate(${t.x!=null?t.x:0},${t.y!=null?t.y:0})`},[l("rect",{width:t.width,height:t.height,fill:"saddlebrown"},null,8,it),(o(!0),d(P,null,x(t.ports,s=>(o(),d("rect",{key:s.id,"aria-label":s.id,x:s.x,y:s.y,width:s.width,height:s.height,fill:"darkblue"},null,8,st))),128)),l("text",{opacity:"1",fill:"blue",x:t.width/2,y:t.height/2,"dominant-baseline":"middle","text-anchor":"middle"},[l("tspan",null,w(t.id),1)],8,rt),(o(!0),d(P,null,x(t.labels,s=>(o(),d("text",{key:s.id,x:s.x,y:s.y,"dominant-baseline":"hanging"},w(s.text),9,ot))),128))],8,et))),128)),(o(!0),d(P,null,x(p(h).edges,t=>(o(),d("path",{key:t.sources+"-"+t.targets,d:t.path,"stroke-width":"3",fill:"none",stroke:"red",opacity:"1","marker-end":"url(#head)"},null,8,dt))),128)),(o(!0),d(P,null,x(p(h).edges.reduce((t,s)=>s.junctionPoints?t.concat(...s.junctionPoints):t,[]),t=>(o(),d("circle",{key:`Joint-${t.x}-${t.y}`,cx:t.x,cy:t.y,r:"3"},null,8,ht))),128))],40,J))])}}});const nt=W(pt,[["__scopeId","data-v-a5843fc2"]]),ct=D({__name:"GraphTest",setup(n){return(S,v)=>(o(),d("div",null,[U(nt)]))}});export{ct as default};
