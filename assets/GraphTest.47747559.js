import{r as y,b as D,d as k,e as v,f as A,w as F,o,c as h,a as l,t as w,g as C,v as X,F as P,h as x,u as a,i as N,p as W,j as U,_ as V,k as H,l as I,S as M,m as Y,n as $}from"./index.5dd9d0f5.js";import{E as B}from"./elk.bundled.d59b6e15.js";const j="https://rtsys.informatik.uni-kiel.de//elklive/elk-models/realworld/ptolemy/flattened/ci_router_Router.json",G="G1",Z=[{id:"N1",labels:[{text:"DataReceived",id:"L1",width:80,height:15}],ports:[{id:"P1",properties:{"port.side":"EAST","port.index":"0"},width:8,height:8},{id:"P2",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P3",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N2",labels:[{text:"MonitorValue - q1 length",id:"L2",width:141,height:15}],ports:[{id:"P4",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:60,height:40},{id:"N3",labels:[{text:"MonitorValue - q2 length",id:"L3",width:141,height:15}],ports:[{id:"P5",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:60,height:40},{id:"N4",labels:[{text:"dropped",id:"L4",width:47,height:15}],ports:[{id:"P6",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:41,height:31},{id:"N5",labels:[{text:"Distributor",id:"L5",width:60,height:15}],ports:[{id:"P7",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P8",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P9",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8},{id:"P10",properties:{"port.side":"EAST","port.index":"3"},width:8,height:8},{id:"P11",properties:{"port.side":"EAST","port.index":"4"},width:8,height:8},{id:"P12",properties:{"port.side":"EAST","port.index":"5"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N6",labels:[{text:"Queue1",id:"L6",width:46,height:15}],ports:[{id:"P13",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P14",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P15",properties:{"port.side":"NORTH","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N7",labels:[{text:"Queue2",id:"L7",width:46,height:15}],ports:[{id:"P16",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P17",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P18",properties:{"port.side":"EAST","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N8",labels:[{text:"Counter",id:"L8",width:46,height:15}],ports:[{id:"P19",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P20",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P21",properties:{"port.side":"EAST","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N9",labels:[{text:"RecordAssembler",id:"L9",width:104,height:15}],ports:[{id:"P22",properties:{"port.side":"EAST","port.index":"0"},width:8,height:8},{id:"P23",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P24",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:40,height:41},{id:"N10",labels:[{text:"Display",id:"L10",width:43,height:15}],ports:[{id:"P25",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:41,height:31},{id:"N11",labels:[{text:"Counter",id:"L11",width:46,height:15}],ports:[{id:"P26",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P27",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P28",properties:{"port.side":"EAST","port.index":"2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N12",labels:[{text:"RecordAssembler",id:"L12",width:104,height:15}],ports:[{id:"P29",properties:{"port.side":"EAST","port.index":"0"},width:8,height:8},{id:"P30",properties:{"port.side":"WEST","port.index":"-1"},width:8,height:8},{id:"P31",properties:{"port.side":"WEST","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:40,height:41},{id:"N13",labels:[{text:"Display",id:"L13",width:43,height:15}],ports:[{id:"P32",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:41,height:31},{id:"N14",labels:[{text:"Sleep",id:"L14",width:34,height:15}],ports:[{id:"P33",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P34",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P35",properties:{"port.side":"SOUTH","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41},{id:"N15",labels:[{text:"Sleep",id:"L15",width:34,height:15}],ports:[{id:"P36",properties:{"port.side":"WEST","port.index":"0"},width:8,height:8},{id:"P37",properties:{"port.side":"EAST","port.index":"1"},width:8,height:8},{id:"P38",properties:{"port.side":"SOUTH","port.index":"-2"},width:8,height:8}],properties:{portConstraints:"FIXED_ORDER","nodeLabels.placement":"[H_LEFT, V_TOP, OUTSIDE]"},width:61,height:41}],q={portConstraints:"FREE"},Q=[{id:"E1",sources:["P1"],targets:["P8"],path:""},{id:"E2",sources:["P11"],targets:["P6"],path:""},{id:"E3",sources:["P12"],targets:["P16"],path:""},{id:"E4",sources:["P10"],targets:["P13"],path:""},{id:"E5",sources:["P15"],targets:["P4"],path:""},{id:"E6",sources:["P15"],targets:["P7"],path:""},{id:"E7",sources:["P14"],targets:["P33"],path:""},{id:"E8",sources:["P18"],targets:["P5"],path:""},{id:"E9",sources:["P18"],targets:["P9"],path:""},{id:"E10",sources:["P17"],targets:["P36"],path:""},{id:"E11",sources:["P21"],targets:["P24"],path:""},{id:"E12",sources:["P22"],targets:["P25"],path:""},{id:"E13",sources:["P28"],targets:["P31"],path:""},{id:"E14",sources:["P29"],targets:["P32"],path:""},{id:"E15",sources:["P34"],targets:["P19"],path:""},{id:"E16",sources:["P34"],targets:["P23"],path:""},{id:"E17",sources:["P37"],targets:["P26"],path:""},{id:"E18",sources:["P37"],targets:["P30"],path:""}],z={URL_SOURCE:j,id:G,children:Z,properties:q,edges:Q};function J(u,c){const e=y({scale:1,minX:0,minY:0}),S=s=>{const{offsetX:g,offsetY:_,deltaY:n}=s,r=e.scale;e.scale*=1+n*.002,e.scale<.1?e.scale=.1:e.scale>12&&(e.scale=12),e.minX=e.minX-g*e.scale+g*r,e.minY=e.minY-_*e.scale+_*r},E=y({x:0,y:0}),f=s=>{E.x=s.offsetX,E.y=s.offsetY},L=s=>{s.buttons==1&&(e.minX+=(E.x-s.offsetX)*e.scale,e.minY+=(E.y-s.offsetY)*e.scale,E.x=s.offsetX,E.y=s.offsetY)},p=(s,g)=>{const _=s?s/u.value:1,n=g?g/c.value:1;e.scale=Math.max(_,n),e.minX=0,e.minY=0},T=D(()=>[e.minX,e.minY,u.value*e.scale,c.value*e.scale].join(" "));return{viewbox:e,wheelEvent:S,mouseDownEvent:f,mouseMoveEvent:L,resetZoom:p,viewBox_str:T}}const K=u=>(W("data-v-b42a5220"),u=u(),U(),u),tt={class:"tooltip"},et={class:"tooltiptext"},it=["value"],st=["viewBox"],rt=K(()=>l("defs",null,[l("marker",{id:"head",orient:"auto",markerWidth:"2",markerHeight:"4",refX:"1.55",refY:"2"},[l("path",{d:"M0,0 V4 L2,2 Z",fill:"black"})])],-1)),ot=["x","y","width","height"],dt=["original-title","transform"],ht=["width","height"],pt=["aria-label","x","y","width","height"],nt=["x","y"],at=["x","y"],lt=["d"],ct=["cx","cy"],Et=k({__name:"elkjsTest",setup(u){const c=v(null);A(()=>{console.log(c.value)});const O=D(()=>c.value?c.value.clientWidth:100),b=D(()=>c.value?c.value.clientHeight:100),{viewBox_str:R,wheelEvent:e,mouseDownEvent:S,mouseMoveEvent:E,resetZoom:f}=J(O,b),L=new B({});let p=y(z);const T=v([]);L.knownLayoutAlgorithms().then(n=>T.value=n);const s=v("layered"),g=()=>{var n;(n=p.edges)==null||n.forEach(r=>{var d;(d=r.sections)==null||d.forEach(t=>{t.bendPoints=[]})}),L.layout(p,{layoutOptions:{"elk.algorithm":s.value}}).then(r=>{f(p.width,p.height),p.edges=r.edges.map(d=>({...d,path:_(d)}))}).catch(r=>console.warn({e:r}))};F(s,()=>{g()},{immediate:!1,deep:!0});const _=n=>(n==null?void 0:n.sections)==null?"":n.sections.reduce((r,d)=>{var t;return r+`M${d.startPoint.x},${d.startPoint.y}${d.bendPoints!=null?(t=d.bendPoints)==null?void 0:t.reduce((i,m)=>i+`L${m.x},${m.y}`,""):""}L${d.endPoint.x},${d.endPoint.y}`},"");return g(),(n,r)=>{var d;return o(),h("div",null,[l("div",tt,[l("span",et,w((d=T.value.find(t=>{var i;return(i=t.id)==null?void 0:i.includes(s.value)}))==null?void 0:d.description),1),C(l("select",{name:"layoutAlgoryth",id:"layoutAlgoryth","onUpdate:modelValue":r[0]||(r[0]=t=>s.value=t)},[(o(!0),h(P,null,x(T.value,t=>{var i,m;return o(),h("option",{key:t.id,value:(i=t.id)==null?void 0:i.slice(16)},w(t.name)+": "+w((m=t.description)==null?void 0:m.slice(void 0,80))+"... ",9,it)}),128))],512),[[X,s.value,void 0,{lazy:!0}]]),l("p",null,w(s.value),1)]),(o(),h("svg",{ref_key:"svgRef",ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:a(R),style:{"background-color":"green"},onWheel:r[1]||(r[1]=N((...t)=>a(e)&&a(e)(...t),["prevent"])),onMousedown:r[2]||(r[2]=(...t)=>a(S)&&a(S)(...t)),onMousemove:r[3]||(r[3]=(...t)=>a(E)&&a(E)(...t))},[rt,l("rect",{x:a(p).x,y:a(p).y,width:a(p).width,height:a(p).height,fill:"none",stroke:"#204060","stroke-width":"2"},null,8,ot),(o(!0),h(P,null,x(a(p).children,t=>(o(),h("g",{key:t.id,class:"node","original-title":t.id,transform:`translate(${t.x!=null?t.x:0},${t.y!=null?t.y:0})`},[l("rect",{width:t.width,height:t.height,fill:"saddlebrown"},null,8,ht),(o(!0),h(P,null,x(t.ports,i=>(o(),h("rect",{key:i.id,"aria-label":i.id,x:i.x,y:i.y,width:i.width,height:i.height,fill:"darkblue"},null,8,pt))),128)),l("text",{opacity:"1",stroke:"blue",x:t.width/2,y:t.height/2,"dominant-baseline":"middle","text-anchor":"middle"},[l("tspan",null,w(t.id),1)],8,nt),(o(!0),h(P,null,x(t.labels,i=>(o(),h("text",{key:i.id,x:i.x,y:i.y,"dominant-baseline":"hanging"},w(i.text),9,at))),128))],8,dt))),128)),(o(!0),h(P,null,x(a(p).edges,t=>(o(),h("path",{key:t.sources+"-"+t.targets,d:t.path,"stroke-width":"3",fill:"none",stroke:"red",opacity:"1","marker-end":"url(#head)"},null,8,lt))),128)),(o(!0),h(P,null,x(a(p).edges.reduce((t,i)=>i.junctionPoints?t.concat(...i.junctionPoints):t,[]),t=>(o(),h("circle",{key:`Joint-${t.x}-${t.y}`,cx:t.x,cy:t.y,r:"3"},null,8,ct))),128))],40,st))])}}});const ut=V(Et,[["__scopeId","data-v-b42a5220"]]),wt=k({__name:"GraphTest",setup(u){return(c,O)=>(o(),h("div",null,[(o(),H(M,null,{fallback:I(()=>[Y(" Loading... ")]),default:I(()=>[$(ut)]),_:1}))]))}});export{wt as default};
